@import "tailwindcss";
@import "tw-animate-css";

/* === Design Tokens === */
:root {
  --font-sans: var(--font-geist-sans), system-ui, sans-serif;
  --font-mono: var(--font-geist-mono), monospace;

  /* Light Mode */
  --bg: #fff8f5;
  --surface: rgba(255, 255, 255, 0.75);
  --text: #111827;
  --muted: #374151;
  --border: #e5e7eb;
  --primary: #9333ea;
  --secondary: #ec4899;
  --accent: #f97316;
  --ring: #9333ea;
}

.dark {
  --bg: #0a0a0f;
  --surface: rgba(22, 27, 34, 0.8);
  --text: #f3f4f6;
  --muted: #9ca3af;
  --border: #2d333b;
  --primary: #6366f1;
  --secondary: #22d3ee;
  --accent: #f472b6;
  --ring: #6366f1;
}

/* === Base === */
body {
  background: linear-gradient(to bottom, var(--bg), var(--surface));
  color: var(--text);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

h1, h2, h3, h4, h5, h6 {
  font-weight: 700;
  letter-spacing: -0.02em;
  text-shadow: 0 1px 2px rgba(0,0,0,0.6),
               0 2px 8px rgba(0,0,0,0.35);
}

a {
  transition: color 0.3s ease;
  text-shadow: 0 1px 2px rgba(0,0,0,0.3);
  animation: linkColorCycle 120s ease-in-out infinite;
}
a:hover {
  text-shadow: 0 0 10px currentColor,
               0 2px 6px rgba(0,0,0,0.4);
}

/* === Utilities === */
.fade-in { animation: fadeIn 1.2s ease-in-out both; }
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

/* === Sky Gradient Cycle (legacy) === */
.sky-cycle {
  position: fixed;
  inset: 0;
  background: linear-gradient(to bottom, #87ceeb, #fff);
  z-index: -2;
  animation: skyShift 240s ease-in-out infinite;
}
@keyframes skyShift {
  0%   { background: linear-gradient(to bottom, #87ceeb, #fff); }      /* Day */
  25%  { background: linear-gradient(to bottom, #ff9966, #ff5e62); }  /* Sunset */
  50%  { background: linear-gradient(to bottom, #0a0a0f, #1a1a40); }  /* Night */
  75%  { background: linear-gradient(to bottom, #fceabb, #f8b500); }  /* Dawn */
  100% { background: linear-gradient(to bottom, #87ceeb, #fff); }     /* Back to Day */
}

/* === Starfield (optional) === */
.starfield {
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0.1;
  transition: opacity 2s ease-in-out;
  z-index: 5;
}
.starfield.active { opacity: 0.4; }
.star {
  position: absolute;
  border-radius: 50%;
  background: white;
  opacity: 0.7;
  box-shadow: 0 0 8px white;
  animation: twinkle 8s ease-in-out infinite;
}
@keyframes twinkle {
  0%, 100% { opacity: 0.4; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.3); }
}

/* === Painterly Clouds (AnimatedSky) === */
.cloud-cluster {
  position: absolute;
  left: -40vw; /* start slightly off-screen left for a clean entrance */
  transform: translateZ(0) scale(var(--cluster-scale, 1));
  filter: saturate(105%);
  will-change: transform, opacity;
  animation: cloud-drift var(--cloud-duration, 220s) linear infinite;
  animation-delay: var(--cloud-delay, 0s);
  opacity: calc(0.72 - (var(--z-tier, 0) * 0.08));
}
.cloud-blob {
  position: absolute;
  border-radius: 9999px;
  background:
    radial-gradient(
      circle at 40% 40%,
      color-mix(in oklab, var(--cloud-tint, rgba(255,255,255,0.55)) 85%, transparent),
      color-mix(in oklab, var(--cloud-tint, rgba(255,255,255,0.55)) 45%, transparent) 50%,
      transparent 80%
    );
  filter: blur(var(--blob-blur, 24px));
  opacity: var(--blob-alpha, 0.5);
  animation: cloudMorph 120s ease-in-out infinite alternate;
  will-change: border-radius, filter, opacity;
}
@keyframes cloud-drift {
  0%   { transform: translateX(0) translateZ(0) scale(var(--cluster-scale, 1)); }
  100% { transform: translateX(220vw) translateZ(0) scale(var(--cluster-scale, 1)); }
}
@keyframes cloudMorph {
  0%   { border-radius: 60% 40% 70% 30% / 50% 60% 40% 50%; }
  50%  { border-radius: 40% 60% 30% 70% / 60% 40% 70% 30%; }
  100% { border-radius: 70% 30% 50% 50% / 40% 70% 60% 40%; }
}

/* === Slow Drifting Particles (AnimatedSky) === */
.drift-particle {
  position: absolute;
  border-radius: 9999px;
  background: rgba(255,255,255,0.6);
  mix-blend-mode: screen;
  will-change: transform, opacity, filter;
  filter: drop-shadow(0 0 calc(6px * var(--glowOpacity, 0)) rgba(180,200,255, var(--glowOpacity, 0)));
  animation:
    particle-float var(--dur, 90s) ease-in-out infinite,
    particle-glow 12s ease-in-out infinite;
  animation-delay: var(--delay, 0s);
  transform: translateZ(0);
}
@keyframes particle-float {
  0%   { transform: translate3d(0, 0, 0);               opacity: 0.25; }
  20%  { transform: translate3d(calc(var(--dx) * 0.3), calc(var(--dy) * 0.35), 0); opacity: 0.35; }
  50%  { transform: translate3d(calc(var(--dx) * 0.8), calc(var(--dy) * 0.8), 0);  opacity: 0.5; }
  80%  { transform: translate3d(calc(var(--dx) * 0.4), calc(var(--dy) * 0.6), 0);  opacity: 0.35; }
  100% { transform: translate3d(0, 0, 0);               opacity: 0.25; }
}
@keyframes particle-glow {
  0%, 100% { filter: drop-shadow(0 0 0px rgba(200,220,255,0)); }
  50%      { filter: drop-shadow(0 0 12px rgba(200,220,255,0.8)); }
}

/* === Cursor Trail (CursorTrail + legacy trail-dot) === */
.cursor-trail {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;
}
.cursor-trail-dot,
.trail-dot {
  position: fixed;
  left: 0; top: 0;
  width: 10px; height: 10px; /* default; JS scales per index */
  border-radius: 9999px;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.85), rgba(255,255,255,0.15));
  box-shadow:
    0 0 10px rgba(255,255,255,0.35),
    0 0 20px color-mix(in oklab, var(--primary) 60%, transparent),
    0 0 28px color-mix(in oklab, var(--secondary) 50%, transparent);
  transform: translate3d(0,0,0);
  opacity: 0.9;
  transition: opacity 220ms ease;
}

/* === Helpful global keyframes used across the app === */
@keyframes shimmer {
  0%   { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

@keyframes linkColorCycle {
  0%   { color: var(--primary); }
  33%  { color: var(--secondary); }
  66%  { color: var(--accent); }
  100% { color: var(--primary); }
}

@keyframes progressCycle {
  0%   { box-shadow: 0 0 6px var(--primary), 0 0 12px var(--secondary), 0 0 18px var(--accent); }
  50%  { box-shadow: 0 0 10px var(--primary), 0 0 18px var(--secondary), 0 0 26px var(--accent); }
  100% { box-shadow: 0 0 6px var(--primary), 0 0 12px var(--secondary), 0 0 18px var(--accent); }
}

@keyframes logoCycle {
  0%   { background-image: linear-gradient(90deg, var(--primary), var(--secondary)); }
  50%  { background-image: linear-gradient(90deg, var(--secondary), var(--accent)); }
  100% { background-image: linear-gradient(90deg, var(--primary), var(--secondary)); }
}

/* Optional class hooks if referenced */
.animate-progressCycle { animation: progressCycle 6s ease-in-out infinite; }
.animate-logoCycle     { animation: logoCycle 10s ease-in-out infinite; }
@keyframes gradientShift {
  0%   { opacity: 0.9; filter: saturate(1); }
  50%  { opacity: 1;   filter: saturate(1.2); }
  100% { opacity: 0.9; filter: saturate(1); }
}
.animate-gradientShift { animation: gradientShift 12s ease-in-out infinite; }

/* === UI Card Utility === */
@layer utilities {
  .ui-card {
    background: color-mix(in oklab, var(--surface) 100%, transparent);
    background-color: color-mix(in oklab, var(--surface) 80%, transparent);
    border: 1px solid color-mix(in oklab, var(--border) 70%, transparent);
    border-radius: 0.75rem;
    box-shadow: 0 10px 30px rgba(0,0,0,.25);
  }
  @supports (backdrop-filter: blur(1px)) {
    .ui-card { backdrop-filter: blur(18px) saturate(160%); }
  }
}

/* === Accessibility & Perf === */
@media (prefers-reduced-motion: reduce) {
  .cloud-cluster,
  .cloud-blob,
  .drift-particle,
  .cursor-trail-dot,
  .trail-dot,
  .animate-gradientShift,
  .animate-logoCycle,
  .animate-progressCycle,
  .fade-in,
  .sky-cycle,
  .star {
    animation: none !important;
    transition: none !important;
  }
}